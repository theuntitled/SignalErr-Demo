@{
    ViewBag.Title = "Home Page";
}

<form name="form">
	
	<div class="form-group">
		<label class="control-label">Feld 1</label>
		<input type="text" id="foo" name="foo" class="form-control" />
	</div>

	<div class="form-group">
		<label class="control-label">Feld 2</label>
		<input type="text" id="bar" name="bar" class="form-control" />
	</div>

</form>

@section scripts {
	<script>
		(function() {
			var leHub = $.connection.demoHub;

			leHub.client.sendMessage = function(message) {
				console.error(message);
			};

			leHub.client.focusField = function(field) {
				$("form[name=form] input[name=" + field + "]")[0].focus();
			};

			leHub.client.updateField = function(field, value) {
				$("form[name=form] input[name=" + field + "]").val(value);
			};

			$.connection.hub.start()
				.done(function() {
					var fields = $("form[name=form] input");

					fields.focus(function() {
						leHub.server.focusField($(this).attr("name"));
					});

					fields.blur(function() {
						leHub.server.updateField($(this).attr("name"), $(this).val());
					});
				});
		})();
	</script>
}
